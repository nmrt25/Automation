pipeline

{

agent any


stages{

stage('Setup Docker Containers'){
steps{
bat "docker-compose -f docker-compose.yaml up"
}
}

stage('Scale Up Container'){
steps{
bat "docker-compose up --scale chrome=5"
}
}

stage('Build'){
steps{
bat "mvn clean"
}
}

stage('Smoke Suite'){
steps{
bat "mvn clean test -Dsurefire.suiteXmlFiles=smoke.xml"
}
}

stage('Sanity Suite'){
steps{
bat "mvn clean test -Dsurefire.suiteXmlFiles=Sanity.xml"
}
}

stage('Regression Suite'){
steps{
bat "mvn clean test -Dsurefire.suiteXmlFiles=fullRegression.xml"
}
}

}

}